(function(e){function t(t){for(var r,s,u=t[0],o=t[1],i=t[2],l=0,d=[];l<u.length;l++)s=u[l],Object.prototype.hasOwnProperty.call(a,s)&&a[s]&&d.push(a[s][0]),a[s]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(e[r]=o[r]);p&&p(t);while(d.length)d.shift()();return c.push.apply(c,i||[]),n()}function n(){for(var e,t=0;t<c.length;t++){for(var n=c[t],r=!0,u=1;u<n.length;u++){var o=n[u];0!==a[o]&&(r=!1)}r&&(c.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={app:0},c=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/vue3-rerendering-sor/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],o=u.push.bind(u);u.push=t,u=u.slice();for(var i=0;i<u.length;i++)t(u[i]);var p=o;c.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"state",(function(){return Je})),n.d(r,"getters",(function(){return Le})),n.d(r,"mutations",(function(){return Ve}));n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23"),c={class:"rr-dragscroll-container"};function s(e,t){var n=Object(a["y"])("router-view");return Object(a["r"])(),Object(a["f"])("div",c,[Object(a["i"])(n,{class:"rr-app"})])}var u=n("6b0d"),o=n.n(u);const i={},p=o()(i,[["render",s]]);var l=p,d=n("6c02"),b=(n("b0c0"),n("a4d3"),n("e01a"),Object(a["g"])("h1",null," Vue.js Rerendering samples ",-1));function m(e,t,n,r,c,s){var u=Object(a["y"])("router-link");return Object(a["r"])(),Object(a["f"])("div",null,[b,(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(s.pages,(function(e){return Object(a["r"])(),Object(a["f"])("div",{key:e.name},[Object(a["g"])("h3",null,[Object(a["i"])(u,{to:e.name},{default:Object(a["D"])((function(){return[Object(a["h"])(Object(a["A"])(e.title),1)]})),_:2},1032,["to"])]),Object(a["g"])("div",null,Object(a["A"])(e.description),1)])})),128))])}var g=n("5530"),h=(n("7db0"),n("d81d"),{computed:{pages:function(){var e=Pe.find((function(e){return"examples"===e.name}));return((e||{}).children||[]).map((function(e){return Object(g["a"])(Object(g["a"])({},e.meta||{}),{},{name:e.name})}))}}});const j=o()(h,[["render",m]]);var O=j,v={key:0},f=Object(a["g"])("strong",null,"Instructions: ",-1),y={key:1},w=Object(a["g"])("strong",null,"Explanation: ",-1),x=Object(a["h"])(" Back to Samples List "),T=Object(a["g"])("hr",null,null,-1);function k(e,t){var n=Object(a["y"])("router-link"),r=Object(a["y"])("router-view");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["g"])("h1",null,Object(a["A"])(e.$route.meta.title),1),Object(a["g"])("p",null,Object(a["A"])(e.$route.meta.description),1),e.$route.meta.instructions?(Object(a["r"])(),Object(a["f"])("p",v,[f,Object(a["h"])(" "+Object(a["A"])(e.$route.meta.instructions),1)])):Object(a["e"])("",!0),e.$route.meta.explanation?(Object(a["r"])(),Object(a["f"])("p",y,[w,Object(a["h"])(" "+Object(a["A"])(e.$route.meta.explanation),1)])):Object(a["e"])("",!0),Object(a["g"])("p",null,[Object(a["i"])(n,{to:{name:"home"}},{default:Object(a["D"])((function(){return[x]})),_:1})]),T,Object(a["i"])(r)])}const D={},U=o()(D,[["render",k]]);var W=U;function I(e,t,n,r,c,s){var u=Object(a["y"])("Dummy");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(e){return c.counter++})},Object(a["A"])(c.counter),1),Object(a["i"])(u,{prop1:{a:1}})])}function A(e,t,n,r,c,s){return Object(a["r"])(),Object(a["f"])("div",null," Dummy: "+Object(a["A"])(n.showProp1?n.prop1:"prop1 is hidden"),1)}var E={props:{prop1:Object,showProp1:Boolean},updated:function(){console.log("Dummy updated")}};const M=o()(E,[["render",A]]);var S=M,$={components:{Dummy:S},data:function(){return{counter:0}}};const C=o()($,[["render",I]]);var P=C;function _(e,t,n,r,c,s){var u=Object(a["y"])("Dummy");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(e){return c.counter++})},Object(a["A"])(c.counter),1),Object(a["i"])(u,{prop1:{a:1},"show-prop1":""})])}var N={components:{Dummy:S},data:function(){return{counter:0}}};const F=o()(N,[["render",_]]);var R=F;function B(e,t,n,r,c,s){var u=Object(a["y"])("Dummy");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(e){return c.counter++})},Object(a["A"])(c.counter),1),Object(a["i"])(u,{prop1:{a:c.counter?1:0}},null,8,["prop1"])])}var q={components:{Dummy:S},data:function(){return{counter:0}}};const J=o()(q,[["render",B]]);var L=J;function V(e,t,n,r,c,s){var u=Object(a["y"])("Dummy");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(e){return c.counter++})},Object(a["A"])(c.counter),1),Object(a["i"])(u,{prop1:{a:c.counter?1:0},"show-prop1":""},null,8,["prop1"])])}var z={components:{Dummy:S},data:function(){return{counter:0}}};const G=o()(z,[["render",V]]);var H=G,K=Object(a["g"])("h3",null," Users with First Tag only ",-1);function Q(e,t,n,r,c,s){var u=Object(a["y"])("UserTagManager"),o=Object(a["y"])("UserWithFirstTag");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["i"])(u),K,(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(s.usersWithTags,(function(e){return Object(a["r"])(),Object(a["d"])(o,{key:e.id,user:e.user,tag:e.tags[0]},null,8,["user","tag"])})),128))])}var X=function(e){return Object(a["u"])("data-v-2946a53a"),e=e(),Object(a["s"])(),e},Y=X((function(){return Object(a["g"])("h3",null," User-Tag Manger ",-1)})),Z={class:"manager-table"},ee=X((function(){return Object(a["g"])("th",{key:"stub-head"},null,-1)})),te={key:"row-header",class:"header header--row"},ne=["checked","onChange"];function re(e,t,n,r,c,s){return Object(a["r"])(),Object(a["f"])("div",null,[Y,Object(a["g"])("table",Z,[Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[ee,(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(s.tags,(function(e){return Object(a["r"])(),Object(a["f"])("th",{key:e.id,class:"header header--column"},Object(a["A"])(e.name),1)})),128))])]),Object(a["g"])("tbody",null,[(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(s.users,(function(e){return Object(a["r"])(),Object(a["f"])("tr",{key:e.id},[Object(a["g"])("td",te,Object(a["A"])(e.name),1),(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(s.tags,(function(t){return Object(a["r"])(),Object(a["f"])("td",{key:t.id},[Object(a["g"])("input",{checked:!!s.userTags[e.id+"-"+t.id],type:"checkbox",onChange:function(n){return s.toggleUserTag(e.id,t.id,n)}},null,40,ne)])})),128))])})),128))])])])}n("07ac");var ae={computed:{users:function(){return Object.values(this.$store.state.example2.users)},tags:function(){return Object.values(this.$store.state.example2.tags)},userTags:function(){return this.$store.state.example2.userTags.reduce((function(e,t){return e[t.userId+"-"+t.tagId]=!0,e}),{})}},methods:{toggleUserTag:function(e,t,n){this.$store.commit("example2/setUserTag",{userId:e,tagId:t,value:n.target.checked})}}};n("de07");const ce=o()(ae,[["render",re],["__scopeId","data-v-2946a53a"]]);var se=ce,ue={class:"rr-user"};function oe(e,t,n,r,c,s){return Object(a["r"])(),Object(a["f"])("div",ue,[Object(a["g"])("div",null,"User: "+Object(a["A"])(n.user.name),1),Object(a["g"])("div",null,"First Tag: "+Object(a["A"])(n.tag?n.tag.name:"No tags"),1)])}var ie={props:{user:{type:Object,required:!0},tag:{type:[Object,void 0],default:void 0}},updated:function(){console.log("UserWithFirstTag updated for ".concat(this.user.name," user"))}};const pe=o()(ie,[["render",oe]]);var le=pe,de={components:{UserTagManager:se,UserWithFirstTag:le},computed:{usersWithTags:function(){return this.$store.getters["example2/usersWithTags"]}}};const be=o()(de,[["render",Q]]);var me=be,ge=Object(a["g"])("h3",null," Users with Tags ",-1);function he(e,t,n,r,c,s){var u=Object(a["y"])("UserTagManager"),o=Object(a["y"])("UserWithTags");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["i"])(u),ge,(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(s.usersWithTags,(function(e){return Object(a["r"])(),Object(a["d"])(o,{key:e.id,user:e.user,tags:e.tags},null,8,["user","tags"])})),128))])}n("a15b");var je={class:"rr-user"};function Oe(e,t,n,r,c,s){return Object(a["r"])(),Object(a["f"])("div",je,[Object(a["g"])("div",null,"User: "+Object(a["A"])(n.user.name),1),Object(a["g"])("div",null,"Tags: "+Object(a["A"])(n.tags.length?n.tags.map((function(e){return e.name})).join(", "):"No Tags"),1)])}var ve={props:{user:{type:Object,required:!0},tags:{type:Array,required:!0}},updated:function(){console.log("UserWithTags updated for ".concat(this.user.name," user"))}};const fe=o()(ve,[["render",Oe]]);var ye=fe,we={components:{UserTagManager:se,UserWithTags:ye},computed:{usersWithTags:function(){return this.$store.getters["example2/usersWithTags"]}}};const xe=o()(we,[["render",he]]);var Te=xe,ke=Object(a["g"])("h3",null," Users with Tags + SelectiveObjectReuse ",-1);function De(e,t,n,r,c,s){var u=Object(a["y"])("UserTagManager"),o=Object(a["y"])("UserWithTags");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["i"])(u),ke,(Object(a["r"])(!0),Object(a["f"])(a["a"],null,Object(a["x"])(s.usersWithTags,(function(e){return Object(a["r"])(),Object(a["d"])(o,{key:e.id,user:e.user,tags:e.tags},null,8,["user","tags"])})),128))])}var Ue={components:{UserTagManager:se,UserWithTags:ye},computed:{usersWithTags:function(){return this.$store.getters["example2/usersWithTagsWrapped"]}}};const We=o()(Ue,[["render",De]]);var Ie=We;function Ae(e,t,n,r,c,s){var u=Object(a["y"])("Dummy");return Object(a["r"])(),Object(a["f"])("div",null,[Object(a["g"])("button",{onClick:t[0]||(t[0]=function(e){return c.counter++})},Object(a["A"])(c.counter),1),Object(a["i"])(u,{prop1:c.sor.wrap({a:c.counter?1:0}),"show-prop1":""},null,8,["prop1"])])}var Ee=n("15eb"),Me=n.n(Ee),Se={components:{Dummy:S},data:function(){return{counter:0,sor:new Me.a}}};const $e=o()(Se,[["render",Ae]]);var Ce=$e,Pe=[{path:"/",name:"home",component:O},{path:"/examples",name:"examples",component:W,children:[{path:"/example1p1",name:"example1p1",component:P,meta:{title:"Example 1.1. Dummy with prop1={a: 1} (static object) that is not shown in Dummy's template",description:"\n[+vue2, +vue3]\nIt works correctly in vue2. Since prop1 is not shown in the template, rendering does not happen when the last changes.\nIt works correctly in vue3, but the reason is different: {a: 1} automatically cached in a separate computed and reused during parent component's render.\n          ",instructions:"\nClick on the button to increase the counter. Notice that Dummy does not trigger updated hook\n          "}},{path:"/example1p2",name:"example1p2",component:R,meta:{title:"Example 1.2. Dummy with prop1={a: 1} (static object) that is shown in Dummy's template",description:"\n[-vue2, +vue3]\nIt causes excessive rendering of Dummy despite the props looks to be the same.\nIt works correctly in vue3.\n          ",instructions:"\nClick on the button to increase the counter. Notice that Dummy triggers updated hook every time in vue2. It works correctly in vue3.\n          ",explanation:"\nProps that go to Dummy are not actually the same.\nEvery time the parent's component counter increases, it triggers render function to run.\nRender function includes :prop1=\"{a: 1}\".\nEvery time render function runs it creates a new {a: 1} object, then passes it to Dummy.\nSince Dummy's render function depends on prop1 object, this new-but-still the same {a: 1} causes rerendering.\n          "}},{path:"/example1p3",name:"example1p3",component:L,meta:{title:"Example 1.3. Dummy with dynamic prop1 that is not shown in Dummy's template",description:"\n[+vue2, -vue3]\nIt works correctly in vue2 because prop1 is not shown in Dummy's template.\nBut it causes excessive rendering in vue3. Wrapping {a: counter ? 1 : 0} into computed does not help because counter triggers it to rerun and a new object is generated every time.\n          ",instructions:"\nClick on the button to increase the counter. Notice Dummy's updated hook is triggered with every counter increase in vue3. It works correctly in vue2.\n          ",explanation:"\nDummy does not trigger updated hook in vue2 because prop1 is not used in the Dummy's template.\nBut the {a: counter ? 1 : 0} object is recreated every time, that's why Dummy's updated hook runs in vue3 every time.\n          "}},{path:"/example1p4",name:"example1p4",component:H,meta:{title:"Example 1.4. Dummy with dynamic prop1 that is shown in Dummy's template",description:"\n[-vue2, -vue3]\nIt does not work properly nor in vue2 neither in vue3.\n          ",instructions:"\nClick on the button to increase the counter. Notice there's Dummy's updated hook triggered every time in vue2 and in vue3.\n          ",explanation:"\nIt causes rerendering in vue2 with the same reason as Example 1.2.\nIt causes rerendering in vue3 with the same reason as Example 1.3.\n          "}},{path:"/example2p1",name:"example2p1",component:me,meta:{title:"Example 2.1. Users<->Tags list with only a first tag shown",description:"\n[+vue2, +vue3]\nIt works properly in vue2 and vue3\n          ",instructions:"\nManage user<->tag using checkboxes.\nNotice the update happens intuitively and in a correct way: <UserWithFirstTag> is rerendered only if first tag really changes in vue2 and vue3.\n          ",explanation:"\nIt works properly because the user and tags[0] objects sent to <UserWithFirstTag> are not recreated/changed in usersWithTags getter when new user-tag relation is created.\n          "}},{path:"/example2p2",name:"example2p2",component:Te,meta:{title:"Example 2.2. Users<->Tags with all the assigned tags shown for every user",description:"\n[-vue2, -vue3]\nEvery new user-tag relation triggers all the <UserWithTags> components to rerender.\n          ",instructions:"\nManage user<->tag using checkboxes.\nNotice every checkbox change triggers all the <UserWithTags> components to update.\n          ",explanation:"\nThis happens because userWithTags getter produces a new array consisting on new objects, every object has tags property that is a new array.\n          "}},{path:"/example2p3",name:"example2p3",component:Ie,meta:{title:"Example 2.3 Users<->Tags with all the tags wrapped with SelectiveObjectReuse",description:"\n[+vue2, +vue3]\nThe previous getter's value is caches by SelectiveObjectReuse.\nWhen the new object is created, it's object-like parts smarterly replaced with the previously stored value.\n          "}},{path:"/example2p4",name:"example2p4",component:Ce,meta:{title:"Example 2.4 Dummy with dynamic prop1 that is shown in Dummy's template + SelectiveObjectReuse",description:"\n[+vue2, +vue3]\nThis is the updated Example 1.4 with the prop1 object wrapped with SelectiveObjectReuse. It works correctly in vue2 and vue3.\n          "}}]}],_e=Object(d["a"])({history:Object(d["b"])(),routes:Pe}),Ne=_e,Fe=n("5502"),Re=(n("4de4"),n("c740"),n("a434"),n("cc98")),Be=n.n(Re),qe=new Me.a,Je=function(){for(var e=[],t={},n={},r=0;r<9;r++){var a=Be()();e.push(a),t[a]={id:a,name:"User ".concat(r+1)}}for(var c=0;c<5;c++){var s=Be()();n[s]={id:s,name:"Tag ".concat(c+1)}}return{userIds:e,users:t,tags:n,userTags:[]}},Le={usersWithTags:function(e){return e.userIds.map((function(t){return{id:t,user:e.users[t],tags:e.userTags.filter((function(e){return e.userId===t})).map((function(t){return e.tags[t.tagId]}))}}))},usersWithTagsWrapped:function(e,t){return qe.wrap(t.usersWithTags,"usersWithTags")}},Ve={setUserTag:function(e,t){var n=t.userId,r=t.tagId,a=t.value,c=e.userTags.findIndex((function(e){return e.userId===n&&e.tagId===r}));-1===c&&a?e.userTags.push({userId:n,tagId:r}):-1===c||a||e.userTags.splice(c,1)}},ze=Object(Fe["a"])({modules:{example2:Object(g["a"])(Object(g["a"])({},r),{},{namespaced:!0})}});n("e53c");Object(a["c"])(l).use(ze).use(Ne).mount("#app")},"8cb5":function(e,t,n){},de07:function(e,t,n){"use strict";n("8cb5")},e53c:function(e,t,n){}});
//# sourceMappingURL=app.88abca09.js.map